<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Product Listing</title>
    <link rel="stylesheet" href="styles.css">
</head>
<style>
    
.container {
    max-width: 1200px;
    padding: 20px;
}

.filters {
    margin-bottom: 20px;
}

.product-grid {
    
    display: grid;
    grid-template-columns: repeat(3, 1fr); 
    grid-template-rows: repeat(7, auto); 
    gap: 20px;
}

.product-item {
    border: 1px solid #ccc;
    padding: 10px;
}

.product-item img {
    max-width: 100%;
    height: auto;
}
.filters{
    height: 100px;
    width: 100%;
    background-color: #333333;
    display: flex;
    justify-content: space-around;
    align-items: center;
}
.mainContenter{
    display: flex;
    justify-content: center;
    align-items: center;
    font-family: sans-serif;
}

</style>
<body>
    <div class="mainContenter">
        <div class="container">
            <div class="filters">
                <h1 style="color: white;">Product Listing Page</h1>
                <div class="searchOpt">
                    <select id="catagaries"></select>
                <input type="text" id="inpts" placeholder="Search by title...">
                </div>
                <select id="sortOrder">
                    <option value="Low">Price: Low to High</option>
                    <option value="High">Price: High to Low</option>
                </select>
            </div>
            <div class="product-grid"></div>
        </div>
    </div>
    <script src="script.js"></script>
</body>
<script>
   
const URL = "https://fakestoreapi.com/products";
const mainContents = document.querySelector('.product-grid');
const catagaries = document.getElementById('catagaries');
const inpts = document.getElementById('inpts');
const sortOrder = document.getElementById('sortOrder');

function fetchProducts() {
    return fetch(URL)
        .then(response => response.json());
}

function populateCategories() {
    fetchProducts()
        .then(products => {
            const categories = ['All'];
            for (let i = 0; i < products.length; i++) {
                let product = products[i];
                if (!categories.includes(product.category)) {
                    categories.push(product.category);
                }
            }
            for (let i = 0; i < categories.length; i++) {
                let category = categories[i];
                const option = document.createElement('option');
                option.value = category;
                option.textContent = category;
                catagaries.appendChild(option);
            }
        });
}

function filterProductsByCategory(products, category) {
    let filteredProducts = [];
    if (category === 'All') {
        filteredProducts = products;
    } else {
        for (let i = 0; i < products.length; i++) {
            let product = products[i];
            if (product.category === category) {
                filteredProducts.push(product);
            }
        }
    }
    return filteredProducts;
}

function searchProducts(products, searchTerm) {
    let filteredProducts = [];
    for (let i = 0; i < products.length; i++) {
        let product = products[i];
        if (product.title.toLowerCase().includes(searchTerm.toLowerCase())) {
            filteredProducts.push(product);
        }
    }
    return filteredProducts;
}

function sortProducts(products, order) {
    let sortedProducts = products.slice(); 
    if (order === 'Low') {
        sortedProducts.sort((a, b) => a.price - b.price);
    } else {
        sortedProducts.sort((a, b) => b.price - a.price);
    }
    return sortedProducts;
}

function displayProducts(products) {
    mainContents.innerHTML = '';
    for (let i = 0; i < products.length; i++) {
        let product = products[i];
        const productItem = document.createElement('div');
        productItem.classList.add('product-item');
        productItem.innerHTML = `
            <img src="${product.image}" alt="${product.title}">
            <h3>${product.title}</h3>
            <p>$${product.price}</p>
        `;
        mainContents.appendChild(productItem);
    }
}

catagaries.addEventListener('change', () => {
    fetchProducts()
        .then(products => {
            const filteredProducts = filterProductsByCategory(products, catagaries.value);
            displayProducts(filteredProducts);
        });
});

inpts.addEventListener('input', () => {
    fetchProducts()
        .then(products => {
            const filteredProducts = searchProducts(products, inpts.value);
            displayProducts(filteredProducts);
        });
});

sortOrder.addEventListener('change', () => {
    fetchProducts()
        .then(products => {
            const sortedProducts = sortProducts(products, sortOrder.value);
            displayProducts(sortedProducts);
        });
});

populateCategories();
fetchProducts().then(products => displayProducts(products));

</script>
</html>
